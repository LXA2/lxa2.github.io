<!DOCTYPE html>
<html>
<head>
  <title>Table</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    .top-bar {
      width: 100%;
      background-color: #f2f2f2;
      padding: 10px;
      box-sizing: border-box;
    }

    .top-bar2{
      width: 100%;
      margin-top: 10px;
    }

    .table-container {
      width: 95%;
      margin: 20px auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    .td1 {
      padding: 5px;
      border: 1px solid #ccc;
      height: 2.2em;
    }

    .f{
      padding: 5px;
      border: 1px solid #ccc;
      height: 2.2em;
      border-bottom: 0;
    }

    input[type="text"] {
      width: 100%;
      height: 3em;
      box-sizing: border-box;
      outline: none;
      border: none;
      font-size: 2.4rem;
    }

    .btn {
      display: inline-block;
      margin-top: 20px;
      margin-left: 5px;
      margin-right: 6%;
      padding: 5px 10px;
      font-size: 4em;
      border-radius: 5%;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    .tbHead{
      padding: 5px;
      border: 1px solid #ccc;
      height: 2.2em;
      border-bottom: 0;
      width: 30%;
    }

    .w::after{
      content: "讲台";
    }
    #text1::after{
      content: "向左";
    }
    #text2::after{
      content: "向右";
    }
    #text3::after{
      content: "恢复默认";
    }
    #text4::after{
      content: "前门";
    }
    #text5::after{
      content: "桌面版";
    }
    .bottom{
      position:fixed;
      background-color: rgba(77, 77, 77, 0.445);
      left:0;
      bottom:0;
      width: 100%;
      z-index: 1000;
    }
    .desktopBTN{
      color: rgb(49, 49, 49);
      font-size: 2.5em;
      margin-left: 20%;
    }
    .edit-btn {
      background-color: #2196F3;
      margin-top: 30px;
    }

    .aaa{
      margin-right: 5%;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <button class="btn" id="right-btn"><span id="text1"></span></button>
    <button class="btn" id="left-btn"><span id="text2"></span></button>
    <div class="top-bar2">
      <button class="btn edit-btn" id="edit-btn">编辑</button>
      <span class="aaa"><button class="btn edit-btn" onclick="localStorage.clear();alert('恢复默认成功');location.reload();"><span id="text3"></span></button></span>
    </div>
  </div>

  <div class="table-container">
    <table>
      <tr>
        <td class="tbHead"></td>
        <td class="tbHead" style="text-align: center;font-size: 3em;"><span class="w"></span></td>
        <td class="tbHead" style="text-align: right;font-size: 2.5em;"><span id="text4"></span></td>
      </tr>
    </table>
    <table id="table0">
      <tbody>
        <tr>
          <td class="f"><input type="text" id="t1" readonly></td>
          <td class="f"><input type="text" id="t2" readonly></td>
          <td class="f"><input type="text" id="t3" readonly></td>
          <td class="f"><input type="text" id="t4" readonly></td>
          <td class="f"><input type="text" id="t5" readonly></td>
          <td class="f"><input type="text" id="t6" readonly></td>
          <td class="f"><input type="text" id="t7" readonly></td>
        </tr>
      </tbody>
    </table>
    <table id="table">
      <tbody>
        <tr>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
        </tr>
        <tr>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
        </tr>
        <tr>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
        </tr>
        <tr>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
        </tr>
        <tr>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
        </tr>
        <tr>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
        </tr>
        <tr>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
          <td class="td1"><input type="text" readonly></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="bottom"><a href="./index.html" class="desktopBTN"><div id="text5"></div></a></div>
  <script>
    var pageID="a2"
    var a1,a2,a6,a7;
    function row1(lor) {
      a1=document.getElementById("t1").value;
      a2=document.getElementById("t2").value;
      a6=document.getElementById("t6").value;
      a7=document.getElementById("t7").value;
      if (lor=="left") {
        document.getElementById("t1").value=a2;
        document.getElementById("t2").value=a6;
        document.getElementById("t6").value=a7;
        document.getElementById("t7").value=a1;
      } else {
        document.getElementById("t1").value=a7;
        document.getElementById("t2").value=a1;
        document.getElementById("t6").value=a2;
        document.getElementById("t7").value=a6;
      }
      for (let i = 1; i < 8; i++) {
        localStorage.setItem(`${pageID}row1_${i}`,document.getElementById(`t${i}`).value);
      }
    }
    const firstRowData = ['范如欣','何亦薇','王一齐','张逸晨','赵佳琪','罗豫','林欣然'];
    if (localStorage.hasOwnProperty(`${pageID}row1_1`)) {
      for (let i = 1; i < 8; i++) {
        document.getElementById(`t${i}`).value=localStorage.getItem(`${pageID}row1_${i}`);
      }
    } else {
      for (let i = 1; i < 8; i++) {
        document.getElementById(`t${i}`).value = firstRowData[i - 1];
      }
    }
    // 从localStorage中获取表格数据，如果没有则使用默认数据
    const tableData = JSON.parse(localStorage.getItem(`${pageID}tableData`)) || [
      ['姚梦蝶', '廖怡', '朱郭瑾', '', '王嘉雯', '顾依凡', '王茵茵'],
      ['田馨', '韩佳璇', '徐书瑶', '', '耿飞扬', '付饶', '杨嘉雨'],
      ['金涵蓉', '倪嘉', '袁佳颖', '', '朱佳璐', '许凰倩', '吴钰尧'],
      ['袁屹辰', '徐敬豪', '吴逸风', '', '陈静怡', '朱思羽', '周徐伟'],
      ['陈浩', '陆鑫', '孔皓霖', '', '全恒', '高昊阳', '沈奕阳'],
      ['', '', '李昕翱', '', '刘陆尧', '范沅翰', '杨云帆'],
      ['', '', '', '', '', '', '']
    ];
    const table = document.getElementById('table');
    const editBtn = document.getElementById('edit-btn');
    const leftBtn = document.getElementById('left-btn');
    const rightBtn = document.getElementById('right-btn');
    // 初始化表格数据
    for (let i = 0; i < table.rows.length; i++) {
      for (let j = 0; j < table.rows[i].cells.length; j++) {
        table.rows[i].cells[j].getElementsByTagName('input')[0].value = tableData[i][j];
      }
    }
    // 标记当前是否处于编辑模式
    let isEditing = false;
    // 编辑按钮点击事件
    editBtn.addEventListener('click', () => {
      isEditing = !isEditing;
      editBtn.textContent = isEditing ? '保存' : '编辑';
      for (let i = 1; i < 8; i++) {
        document.getElementById(`t${i}`).readOnly = !isEditing;
      }
      for (let i = 0; i < table.rows.length; i++) {
        for (let j = 0; j < table.rows[i].cells.length; j++) {
          const input = table.rows[i].cells[j].getElementsByTagName('input')[0];
          input.readOnly = !isEditing;

          if (!isEditing) {
            // 保存编辑后的数据到localStorage
            tableData[i][j] = input.value;
            localStorage.setItem(`${pageID}tableData`, JSON.stringify(tableData));
            for (let i = 1; i < 8; i++) {
              localStorage.setItem(`${pageID}row1_${i}`,document.getElementById(`t${i}`).value);
            }
          }
        }
      }
    });
    // 向右按钮点击事件
    leftBtn.addEventListener('click', () => {
      const lastColData = [];
      row1("right");
      for (let i = 0; i < table.rows.length; i++) {
        const lastColInput = table.rows[i].cells[table.rows[i].cells.length - 1].getElementsByTagName('input')[0];
        lastColData.push(lastColInput.value);

        for (let j = table.rows[i].cells.length - 1; j >= 1; j--) {//移动每一列，第三列不动
          if (j==4) {
            const input = table.rows[i].cells[j].getElementsByTagName('input')[0];
            const prevInput = table.rows[i].cells[j - 2].getElementsByTagName('input')[0];
            input.value = prevInput.value;
          }else{
            if (j!=3) {
              const input = table.rows[i].cells[j].getElementsByTagName('input')[0];
              const prevInput = table.rows[i].cells[j - 1].getElementsByTagName('input')[0];
              input.value = prevInput.value;
            }
          }
        }
      }
      for (let i = 0; i < table.rows.length; i++) {//末端一列的移动孔皓霖牛逼
        const firstColInput = table.rows[i].cells[0].getElementsByTagName('input')[0];
        firstColInput.value = lastColData[i];
      }
      // 保存移动后的数据到localStorage
      for (let i = 0; i < table.rows.length; i++) {
        for (let j = 0; j <= table.rows[i].cells.length - 1; j++) {
          tableData[i][j] = table.rows[i].cells[j].getElementsByTagName('input')[0].value;
        }
      }
      localStorage.setItem(`${pageID}tableData`, JSON.stringify(tableData));
    });
    // 向左按钮点击事件
    rightBtn.addEventListener('click', () => {
      const firstColData = [];
      row1("left");
      for (let i = 0; i < table.rows.length; i++) {
        const firstColInput = table.rows[i].cells[0].getElementsByTagName('input')[0];
        firstColData.push(firstColInput.value);
        for (let j = 0; j < table.rows[i].cells.length - 1; j++) {
          if (j==2) {
            const input = table.rows[i].cells[j].getElementsByTagName('input')[0];
            const nextInput = table.rows[i].cells[j + 2].getElementsByTagName('input')[0];
            input.value = nextInput.value;
          } else {
            if (j!=3) {
              const input = table.rows[i].cells[j].getElementsByTagName('input')[0];
              const nextInput = table.rows[i].cells[j + 1].getElementsByTagName('input')[0];
              input.value = nextInput.value;
            }
          }
        }
      }
      for (let i = 0; i < table.rows.length; i++) {
        const lastColInput = table.rows[i].cells[table.rows[i].cells.length - 1].getElementsByTagName('input')[0];
        lastColInput.value = firstColData[i];
      }
      // 保存移动后的数据到localStorage
      for (let i = 0; i < table.rows.length; i++) {
        for (let j = 0; j <= table.rows[i].cells.length - 1; j++) {
            tableData[i][j] = table.rows[i].cells[j].getElementsByTagName('input')[0].value;
        } 
      }
      console.log(JSON.stringify(tableData));
      localStorage.setItem(`${pageID}tableData`, JSON.stringify(tableData));
    });
  </script>
</body>
</html>
